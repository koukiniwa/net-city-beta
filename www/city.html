<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEOå¯¾ç­–: åŸºæœ¬ã®metaã‚¿ã‚° -->
    <title>NET CITY Î² - ãƒãƒ£ãƒƒãƒˆä¸­ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆ</title>
    <meta name="description" content="NET CITY Î²ã®ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã€‚æœªæ¥çš„ãªè¡—ã®èƒŒæ™¯ã§ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚„ã‚Šã¨ã‚Šã—ã‚ˆã†ã€‚">
    <meta name="keywords" content="ãƒãƒ£ãƒƒãƒˆ,ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ,ã‚ªãƒ³ãƒ©ã‚¤ãƒ³,NET CITY,ãƒãƒƒãƒˆã‚·ãƒ†ã‚£">
    <meta name="author" content="koukiniwa">

    <!-- OGPï¼ˆOpen Graph Protocolï¼‰- SNSã§ã‚·ã‚§ã‚¢ã—ãŸæ™‚ã®è¡¨ç¤º -->
    <meta property="og:title" content="NET CITY Î² - ãƒãƒ£ãƒƒãƒˆä¸­">
    <meta property="og:description" content="æœªæ¥çš„ãªè¡—ã®èƒŒæ™¯ã§ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ãƒãƒ£ãƒƒãƒˆã‚’æ¥½ã—ã‚‚ã†ï¼">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://koukiniwa.github.io/net-city-beta/city.html">
    <meta property="og:image" content="https://koukiniwa.github.io/net-city-beta/ogp-image.svg">
    <meta property="og:site_name" content="NET CITY Î²">
    <meta property="og:locale" content="ja_JP">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="NET CITY Î² - ãƒãƒ£ãƒƒãƒˆä¸­">
    <meta name="twitter:description" content="æœªæ¥çš„ãªè¡—ã®èƒŒæ™¯ã§ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ãƒãƒ£ãƒƒãƒˆã‚’æ¥½ã—ã‚‚ã†ï¼">
    <meta name="twitter:image" content="https://koukiniwa.github.io/net-city-beta/ogp-image.svg">

    <!-- æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³å‘ã‘ -->
    <meta name="robots" content="index, follow">

    <!-- PWAå¯¾å¿œ -->
    <meta name="theme-color" content="#00ffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="NET CITY">
    <link rel="manifest" href="manifest.json">

    <!-- ãƒ•ã‚¡ãƒ“ã‚³ãƒ³è¨­å®šï¼ˆè¤‡æ•°ã‚µã‚¤ã‚ºï¼‰ -->
    <link rel="icon" type="image/svg+xml" href="icon.svg">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.webp">
    <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512.webp">
    <link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192.webp">
    <link rel="apple-touch-icon" sizes="512x512" href="icons/icon-512.webp">

    <!-- ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã‚’èª­ã¿è¾¼ã¿ -->
    <link rel="stylesheet" href="css/city.css?v=6">
</head>
<body>
    <!-- è¡—ã®èƒŒæ™¯ -->
    <div class="city-background">
        <!-- æœªæ¥çš„ãªè¡—ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ -->
        <div class="sky-gradient"></div>

        <!-- å»ºç‰©ã®ã‚·ãƒ«ã‚¨ãƒƒãƒˆï¼ˆCSS ã§æç”»ï¼‰ -->
        <div class="city-skyline">
            <div class="building" style="left: 5%; width: 60px; height: 200px;"></div>
            <div class="building" style="left: 12%; width: 80px; height: 280px;"></div>
            <div class="building" style="left: 20%; width: 50px; height: 180px;"></div>
            <div class="building" style="left: 28%; width: 90px; height: 320px;"></div>
            <div class="building" style="left: 38%; width: 70px; height: 240px;"></div>
            <div class="building" style="left: 48%; width: 55px; height: 200px;"></div>
            <div class="building" style="left: 56%; width: 85px; height: 300px;"></div>
            <div class="building" style="left: 66%; width: 65px; height: 220px;"></div>
            <div class="building" style="left: 74%; width: 75px; height: 260px;"></div>
            <div class="building" style="left: 84%; width: 60px; height: 190px;"></div>
            <div class="building" style="left: 92%; width: 70px; height: 240px;"></div>
        </div>
    </div>

    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆä¸Šéƒ¨ã®ãƒãƒ¼ï¼‰ -->
    <header class="header">
        <div class="header-left">
            <button class="hamburger-menu" id="hamburgerMenu" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <h1 class="city-title">NET CITY Î²</h1>
        </div>
        <div class="header-right">
            <span class="username-display" id="usernameDisplay">ã‚²ã‚¹ãƒˆ</span>
        </div>
    </header>

    <!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰ -->
    <div class="sidebar-menu" id="sidebarMenu">
        <div class="sidebar-header">
            <h2>è¨­å®š</h2>
            <button class="close-menu" id="closeMenu" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹">âœ•</button>
        </div>
        <div class="sidebar-content">
            <div class="menu-item" id="editNumberMenu">
                <span class="menu-icon">ğŸ”¢</span>
                <span class="menu-text">ç•ªå·ã‚’å¤‰æ›´</span>
            </div>
            <div class="menu-item" id="clearCacheMenu">
                <span class="menu-icon">ğŸ—‘ï¸</span>
                <span class="menu-text">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢</span>
            </div>
            <div class="menu-section">
                <h3>ãƒ†ãƒ¼ãƒ</h3>
                <div class="menu-item theme-option" id="lightMode">
                    <span class="menu-icon">â˜€ï¸</span>
                    <span class="menu-text">ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰</span>
                    <span class="checkmark">âœ“</span>
                </div>
                <div class="menu-item theme-option" id="neonMode">
                    <span class="menu-icon">ğŸŒ™</span>
                    <span class="menu-text">ãƒã‚ªãƒ³ãƒ¢ãƒ¼ãƒ‰</span>
                    <span class="checkmark">âœ“</span>
                </div>
            </div>
            <div class="menu-section">
                <h3>è‡ªåˆ†ã®ãƒ«ãƒ¼ãƒ </h3>
                <div class="my-rooms-container" id="myRoomsContainer">
                    <!-- è‡ªåˆ†ã®ãƒ«ãƒ¼ãƒ ãŒã“ã“ã«å‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
                    <div class="my-rooms-empty">ä½œæˆã—ãŸãƒ«ãƒ¼ãƒ ã¯ã‚ã‚Šã¾ã›ã‚“</div>
                </div>
            </div>
            <div class="menu-section">
                <h3>ãƒ«ãƒ¼ãƒ ä¸€è¦§</h3>
                <div class="room-list-container" id="roomListContainer">
                    <!-- ãƒ«ãƒ¼ãƒ ä¸€è¦§ãŒã“ã“ã«å‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
                    <div class="room-list-loading">èª­ã¿è¾¼ã¿ä¸­...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ -->
    <div class="chat-container">
        <!-- ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ–ãƒãƒ¼ï¼ˆYahoo!ãƒ‹ãƒ¥ãƒ¼ã‚¹é¢¨ï¼‰ -->
        <div class="category-bar">
            <div class="category-tabs" id="categoryTabs">
                <button class="category-tab active" data-category="chat">ğŸ’¬ é›‘è«‡</button>
                <button class="category-tab" data-category="consultation">ğŸ¤ ç›¸è«‡</button>
                <button class="category-tab" data-category="love">ğŸ’• æ‹æ„›</button>
                <button class="category-tab" data-category="news">ğŸ“° æ™‚äº‹</button>
                <button class="category-tab" data-category="life">ğŸŒ± äººç”Ÿ</button>
                <button class="category-tab" data-category="hobby">ğŸ¨ è¶£å‘³</button>
            </div>
        </div>

        <!-- ãƒ«ãƒ¼ãƒ ä¸€è¦§ãƒ“ãƒ¥ãƒ¼ï¼ˆãƒ¡ã‚¤ãƒ³ç”»é¢ï¼‰ -->
        <div class="room-list-view" id="roomListView">
            <div class="room-cards-container" id="roomCardsContainer">
                <!-- ãƒ«ãƒ¼ãƒ ã‚«ãƒ¼ãƒ‰ãŒã“ã“ã«å‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹ -->
                <div class="welcome-message">
                    <p>NET CITY Î²ã¸ã‚ˆã†ã“ãï¼</p>
                    <p>ã‚«ãƒ†ã‚´ãƒªã‹ã‚‰ãƒ«ãƒ¼ãƒ ã‚’é¸ã‚“ã§ãƒãƒ£ãƒƒãƒˆã‚’å§‹ã‚ã‚ˆã†</p>
                </div>
            </div>

            <!-- ãƒ«ãƒ¼ãƒ ä½œæˆãƒœã‚¿ãƒ³ï¼ˆä¸‹éƒ¨ä¸­å¤®ï¼‰ -->
            <button class="floating-create-btn" id="createRoomBtn" aria-label="æ–°ã—ã„ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆ">
                â•
            </button>
        </div>

        <!-- ãƒãƒ£ãƒƒãƒˆãƒ“ãƒ¥ãƒ¼ï¼ˆãƒ«ãƒ¼ãƒ é¸æŠæ™‚ã«è¡¨ç¤ºï¼‰ -->
        <div class="chat-view" id="chatView" style="display: none;">
            <!-- ãƒãƒ£ãƒƒãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ -->
            <div class="chat-header">
                <button class="back-button" id="backToRoomList" aria-label="ãƒ«ãƒ¼ãƒ ä¸€è¦§ã«æˆ»ã‚‹">
                    â† æˆ»ã‚‹
                </button>
                <div class="chat-room-info">
                    <span class="chat-room-emoji" id="chatRoomEmoji">ğŸ </span>
                    <span class="chat-room-name" id="chatRoomName">åºƒå ´</span>
                </div>
                <div class="chat-room-users">
                    <span class="user-count" id="chatUserCount">0äºº</span>
                </div>
            </div>

            <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <div class="messages-area" id="messagesArea">
                <!-- ã“ã“ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ -->
            </div>

            <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›ã‚¨ãƒªã‚¢ -->
            <div class="input-area">
                <textarea
                    id="messageInput"
                    class="message-input"
                    placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›..."
                    maxlength="200"
                    autocomplete="off"
                    rows="1"
                ></textarea>
                <button id="sendButton" class="send-button">
                    <span>é€ä¿¡</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Firebase SDKã‚’èª­ã¿è¾¼ã¿ï¼ˆCDNç‰ˆï¼‰ -->
    <!-- Firebase 9.xç³»ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç‰ˆï¼‰ -->
    <script type="module">
        // Firebase SDKï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³9ä»¥é™ï¼‰ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js';
        import { getDatabase } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js';
        import { getStorage } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-storage.js';

        // Firebaseã®è¨­å®š
        const firebaseConfig = {
            apiKey: "AIzaSyBv2rtsWPL8AHqnlXlRKfMkXptAvV7QBWM",
            authDomain: "net-city-beta.firebaseapp.com",
            databaseURL: "https://net-city-beta-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "net-city-beta",
            storageBucket: "net-city-beta.firebasestorage.app",
            messagingSenderId: "134573205357",
            appId: "1:134573205357:web:59080845633bf5e39b9c64"
        };

        // Firebaseã‚’åˆæœŸåŒ–
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const storage = getStorage(app);

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å…¬é–‹ï¼ˆcity.jsã§ä½¿ã†ï¼‰
        window.firebaseApp = app;
        window.firebaseDatabase = database;
        window.firebaseStorage = storage;
    </script>

    <!-- ãƒ«ãƒ¼ãƒ ä½œæˆãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="modal" id="createRoomModal">
        <div class="modal-content">
            <h2 class="modal-title">æ–°ã—ã„ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆ</h2>
            <div class="form-group">
                <label for="roomName">ãƒ«ãƒ¼ãƒ å</label>
                <input type="text" id="roomName" maxlength="15" placeholder="ä¾‹ï¼šæ·±å¤œã®é›‘è«‡" autocomplete="off">
            </div>
            <div class="form-group">
                <label>ã‚«ãƒ†ã‚´ãƒª</label>
                <div class="category-selector">
                    <label><input type="radio" name="category" value="chat" checked> ğŸ’¬ é›‘è«‡</label>
                    <label><input type="radio" name="category" value="consultation"> ğŸ¤ ç›¸è«‡</label>
                    <label><input type="radio" name="category" value="love"> ğŸ’• æ‹æ„›</label>
                    <label><input type="radio" name="category" value="news"> ğŸ“° æ™‚äº‹</label>
                    <label><input type="radio" name="category" value="life"> ğŸŒ± äººç”Ÿ</label>
                    <label><input type="radio" name="category" value="hobby"> ğŸ¨ è¶£å‘³</label>
                </div>
            </div>
            <div class="form-group">
                <label>çµµæ–‡å­—ã‚¢ã‚¤ã‚³ãƒ³</label>
                <div class="emoji-selector" id="emojiSelector">
                    <button class="emoji-option" data-emoji="ğŸ’¬" aria-label="ãƒãƒ£ãƒƒãƒˆçµµæ–‡å­—">ğŸ’¬</button>
                    <button class="emoji-option" data-emoji="ğŸ®" aria-label="ã‚²ãƒ¼ãƒ çµµæ–‡å­—">ğŸ®</button>
                    <button class="emoji-option" data-emoji="ğŸµ" aria-label="éŸ³æ¥½çµµæ–‡å­—">ğŸµ</button>
                    <button class="emoji-option" data-emoji="ğŸ“š" aria-label="æœ¬çµµæ–‡å­—">ğŸ“š</button>
                    <button class="emoji-option" data-emoji="ğŸ¨" aria-label="ã‚¢ãƒ¼ãƒˆçµµæ–‡å­—">ğŸ¨</button>
                    <button class="emoji-option" data-emoji="âš½" aria-label="ã‚µãƒƒã‚«ãƒ¼çµµæ–‡å­—">âš½</button>
                    <button class="emoji-option" data-emoji="ğŸ•" aria-label="ãƒ”ã‚¶çµµæ–‡å­—">ğŸ•</button>
                    <button class="emoji-option" data-emoji="â˜•" aria-label="ã‚³ãƒ¼ãƒ’ãƒ¼çµµæ–‡å­—">â˜•</button>
                    <button class="emoji-option" data-emoji="ğŸŒ™" aria-label="æœˆçµµæ–‡å­—">ğŸŒ™</button>
                    <button class="emoji-option" data-emoji="â­" aria-label="æ˜Ÿçµµæ–‡å­—">â­</button>
                </div>
            </div>
            <div class="form-group">
                <label>æœ€å¤§äººæ•°</label>
                <div class="max-users-selector">
                    <label><input type="radio" name="maxUsers" value="10"> 10äºº</label>
                    <label><input type="radio" name="maxUsers" value="20"> 20äºº</label>
                    <label><input type="radio" name="maxUsers" value="30" checked> 30äºº</label>
                    <label><input type="radio" name="maxUsers" value="50"> 50äºº</label>
                </div>
            </div>
            <div class="form-group">
                <label for="roomDescription">èª¬æ˜ï¼ˆä»»æ„ï¼‰</label>
                <input type="text" id="roomDescription" maxlength="50" placeholder="ã“ã®ãƒ«ãƒ¼ãƒ ã«ã¤ã„ã¦..." autocomplete="off">
            </div>
            <div class="modal-actions">
                <button class="btn-cancel" id="cancelCreateRoom">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button class="btn-create" id="confirmCreateRoom">ä½œæˆã™ã‚‹</button>
            </div>
        </div>
    </div>

    <!-- ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã®JavaScriptã‚’èª­ã¿è¾¼ã¿ -->
    <script type="module" src="js/city.js?v=4"></script>

    <!-- Service Worker ç™»éŒ² -->
    <script>
        // Service Worker ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then((registration) => {
                        console.log('âœ… Service Worker ç™»éŒ²æˆåŠŸ:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('âŒ Service Worker ç™»éŒ²å¤±æ•—:', error);
                    });
            });
        }
    </script>
</body>
</html>
